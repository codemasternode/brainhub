{"version":3,"sources":["../../src/controllers/eventController.js"],"names":["registerNewPerson","req","res","Person","create","body","person","send","errorResponse","key","errors","properties","message","toString","split","status"],"mappings":";;;;;;;;;;;;;;;AAAA;;;;;;SAEsBA,iB;;;;;qGAAf,iBAAiCC,GAAjC,EAAsCC,GAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAGsBC,mBAAOC,MAAP,mBAAmBH,GAAG,CAACI,IAAvB,EAHtB;;AAAA;AAGOC,YAAAA,MAHP;AAAA,6CAIQJ,GAAG,CAACK,IAAJ,CAAS;AAACD,cAAAA,MAAM,EAANA;AAAD,aAAT,CAJR;;AAAA;AAAA;AAAA;AAMOE,YAAAA,aANP,GAMuB,EANvB;;AAOC,iBAAQC,GAAR,IAAe,YAAIC,MAAnB,EAA2B;AACvB;AACA,kBAAG,YAAIA,MAAJ,CAAWD,GAAX,EAAgBE,UAAnB,EAA+B;AAC3BH,gBAAAA,aAAa,CAACC,GAAD,CAAb,GAAqB,YAAIC,MAAJ,CAAWD,GAAX,EAAgBE,UAAhB,CAA2BC,OAAhD;AACH,eAFD,CAGA;AAHA,mBAIK;AACDJ,kBAAAA,aAAa,CAACC,GAAD,CAAb,GAAqB,YAAIC,MAAJ,CAAWD,GAAX,EAAgBI,QAAhB,GAA2BC,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAArB;AACH;AACJ;;AAhBF,6CAiBQZ,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqB;AAACC,cAAAA,aAAa,EAAbA;AAAD,aAArB,CAjBR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import Person from '../models/person'\n\nexport async function registerNewPerson(req, res) {\n    \n    try {\n        const person = await Person.create({ ...req.body })\n        return res.send({person})\n    } catch (err) {\n        const errorResponse = {}\n        for(let key in err.errors) {\n            //ValidationError handler\n            if(err.errors[key].properties) {\n                errorResponse[key] = err.errors[key].properties.message\n            } \n            //CastError handler\n            else {\n                errorResponse[key] = err.errors[key].toString().split(\":\")[1]\n            }\n        }\n        return res.status(400).send({errorResponse})\n    }\n}"],"file":"eventController.js"}